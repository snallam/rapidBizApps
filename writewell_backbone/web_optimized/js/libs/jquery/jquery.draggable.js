!function(t,o,h,a){function r(i,s){this.options=t.extend({},l,s),this.$body=t(h.body),this.$container=t(i),this.$dragitems=t(this.options.items,this.$container),this.is_dragging=!1,this.player_min_left=0+this.options.offset_left,this.init()}var l={items:".gs_w",distance:1,limit:!0,offset_left:0,autoscroll:!0,ignore_dragging:["INPUT","TEXTAREA","SELECT","BUTTON"],handle:null},n=t(o),e=!!("ontouchstart"in o),s={start:e?"touchstart":"mousedown.draggable",move:e?"touchmove":"mousemove.draggable",end:e?"touchend":"mouseup.draggable"},i=r.prototype;i.init=function(){this.calculate_positions(),this.$container.css("position","relative"),this.disabled=!1,this.events(),this.on_window_resize=throttle(t.proxy(this.calculate_positions,this),200),t(o).bind("resize",this.on_window_resize)},i.events=function(){this.proxied_on_select_start=t.proxy(this.on_select_start,this),this.$container.on("selectstart",this.proxied_on_select_start),this.proxied_drag_handler=t.proxy(this.drag_handler,this),this.$container.on(s.start,this.options.items,this.proxied_drag_handler),this.proxied_pointer_events_end=t.proxy(function(t){this.is_dragging=!1,this.disabled||(this.$body.off(s.move),this.drag_start&&this.on_dragstop(t))},this),this.$body.on(s.end,this.proxied_pointer_events_end)},i.get_actual_pos=function(t){var i=t.position();return i},i.get_mouse_pos=function(t){if(e){var i=t.originalEvent;t=i.touches.length?i.touches[0]:i.changedTouches[0]}return{left:t.clientX,top:t.clientY}},i.get_offset=function(s){var i,e,o,t,n;return s.preventDefault(),i=this.get_mouse_pos(s),e=Math.round(i.left-this.mouse_init_pos.left),o=Math.round(i.top-this.mouse_init_pos.top),t=Math.round(this.el_init_offset.left+e-this.baseX),n=Math.round(this.el_init_offset.top+o-this.baseY+this.scrollOffset),this.options.limit&&(t>this.player_max_left?t=this.player_max_left:this.player_min_left>t&&(t=this.player_min_left)),{left:t,top:n,mouse_left:i.left,mouse_top:i.top}},i.manage_scroll=function(o){var t,i=n.scrollTop(),s=i,h=s+this.window_height,r=h-50,a=s+50,e=s+o.mouse_top,l=this.doc_height-this.window_height+this.player_height;e>=r&&(t=i+30,l>t&&(n.scrollTop(t),this.scrollOffset=this.scrollOffset+30)),a>=e&&(t=i-30,t>0&&(n.scrollTop(t),this.scrollOffset=this.scrollOffset-30))},i.calculate_positions=function(){this.window_height=n.height()},i.drag_handler=function(o){var i,n;if(!this.disabled&&(1===o.which||e)&&!this.ignore_drag(o))return i=this,n=!0,this.$player=t(o.currentTarget),this.el_init_pos=this.get_actual_pos(this.$player),this.mouse_init_pos=this.get_mouse_pos(o),this.offsetY=this.mouse_init_pos.top-this.el_init_pos.top,this.on_pointer_events_move=function(t){var s=i.get_mouse_pos(t),e=Math.abs(s.left-i.mouse_init_pos.left),o=Math.abs(s.top-i.mouse_init_pos.top);return e>i.options.distance||o>i.options.distance?n?(n=!1,i.on_dragstart.call(i,t),!1):(i.is_dragging===!0&&i.on_dragmove.call(i,t),!1):!1},this.$body.on(s.move,this.on_pointer_events_move),!1},i.on_dragstart=function(i){i.preventDefault(),this.drag_start=!0,this.is_dragging=!0;var s=this.$container.offset();return this.baseX=Math.round(s.left),this.baseY=Math.round(s.top),this.doc_height=t(h).height(),"clone"===this.options.helper?(this.$helper=this.$player.clone().appendTo(this.$container).addClass("helper"),this.helper=!0):this.helper=!1,this.scrollOffset=0,this.el_init_offset=this.$player.offset(),this.player_width=this.$player.width(),this.player_height=this.$player.height(),this.player_max_left=this.$container.width()-this.player_width+this.options.offset_left,this.options.start&&this.options.start.call(this.$player,i,{helper:this.helper?this.$helper:this.$player}),!1},i.on_dragmove=function(i){var s,t=this.get_offset(i);return this.options.autoscroll&&this.manage_scroll(t),(this.helper?this.$helper:this.$player).css({position:"absolute",left:t.left,top:t.top}),s={position:{left:t.left,top:t.top}},this.options.drag&&this.options.drag.call(this.$player,i,s),!1},i.on_dragstop=function(t){var i,s=this.get_offset(t);return this.drag_start=!1,i={position:{left:s.left,top:s.top}},this.options.stop&&this.options.stop.call(this.$player,t,i),this.helper&&this.$helper.remove(),!1},i.on_select_start=function(t){return this.disabled||this.ignore_drag(t)?a:!1},i.enable=function(){this.disabled=!1},i.disable=function(){this.disabled=!0},i.destroy=function(){this.disable(),this.$container.off("selectstart",this.proxied_on_select_start),this.$container.off(s.start,this.options.items,this.proxied_drag_handler),this.$body.off(s.end,this.proxied_pointer_events_end),this.$body.off(s.move,this.on_pointer_events_move),t(o).unbind("resize",this.on_window_resize),t.removeData(this.$container,"drag")},i.ignore_drag=function(i){return this.options.handle?!t(i.target).is(this.options.handle):t.inArray(i.target.nodeName,this.options.ignore_dragging)>=0},t.fn.dragg=function(i){return this.each(function(){t.data(this,"drag")||t.data(this,"drag",new r(this,i))})}}(jQuery,window,document);